<?php

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;

/**
 * @var Template $block
 * @var Escaper $escaper
 */
?>

<div id="me-ln-control-block">
    <div id="me-ln-c-b-title"><?= $escaper->escapeHtml(__('ME BlockHints')) ?></div>

    <div id="mageugenes-blockhints-switch">
        <label for="mageugenes-blockhints-switch-input">Enable block hints</label>
        <input type="checkbox" id ="mageugenes-blockhints-switch-input">
    </div>
</div>

<script>
    require(['me-ln-hints',
            'jquery',
            'jquery/jquery.cookie',
            'domReady!'],
    function(meLnHints, $) {

        let showHints = $.cookie('me-ln-wrapper');
        let isChecked = showHints == 1 ? true : false

        $('#mageugenes-blockhints-switch-input').prop('checked', isChecked);

        meLnHints('debugging-hint-mageugenes-layoutnames', isChecked);

        $('.me-ln-wrapper').hide();

        if(isChecked) {
            $('.me-ln-wrapper').show().css('display', 'inline-block');
        } else {
            $('.me-ln-wrapper').hide();
        }

        $('body').on('change', '#mageugenes-blockhints-switch-input', function (event) {
            if(this.checked) {
                $('.me-ln-wrapper').show().css('display', 'inline-block');;
                $.cookie('me-ln-wrapper', 1);
            } else {
                $('.me-ln-wrapper').hide();
                $.cookie('me-ln-wrapper', 2);
            }
        });

    });
</script>

